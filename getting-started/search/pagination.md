分页
======

* [空搜索](the-empty-search.md)
* [多索引，多类型](multi-index-multitype.md)
* [分页](pagination.md)
* [搜索精简版](search-lite.md)

之前《[空搜索](the-empty-search.md)》一节告诉我们，急群众有14个文档匹配我们的查询（空查询）。但是在`hits`中只返回10个文档。我们怎么能看到另外的4个文档呢？

和SQL语句中使用`LIMIT`关键词返回一“页”的方式类似，Elasticsearch接收`from`和`size`两个参数：


`size`
> 表明需要返回多少个结果，默认为10。

`from`
> 表明忽略前面的多少个结果。默认为0.

如果你需要每页显示5条记录，那么第1至第3页的请求如下：

```shell
GET /_search?size=5
GET /_search?size=5&from=5
GET /_search?size=5&from=10
```
谨防深分页（页数很大）或者一次请求结果过多。结果在返回前会被排序。记住一个搜索结果通常由多个分片返回。每个分片产生自己的排序结果，然后会集中排序一下，以确保排序的结果是正确的。

> 分布式系统的深分页
----------------
为了理解深分页带来的问题，假设我们搜索一个有5个分片的索引。当我们请求第1页的结果（第1到10个结果），每一个分片产生前10条记录并返回给请求节点，清秋节点对50各结果进行排序取前10个返回。

> 现在假设我们请求第1000页，即第10001到10010条记录。工作原理和之前一样，而每个分片必须产生10010条记录。请求节点则需要对全部50050条记录进行排序，丢弃掉50040条记录！

> 你可以看到，在一个分布式系统，随着页数增大，排序结果的成本呈指数级增长。这是一个任何网站搜索引擎不会返回超过1000条记录的最好理由。

> 提示
-------------
在《[重新索引数据](reindexing-your-data.md)》一章中我们将解释如何高效地检索大量文档。

-------------------------
[« 多索引，多类型](multi-index-multitype.md)     [搜索精简版 »](search-lite.md)
